{"version":3,"sources":["assets/icons/android-chrome-192x192.png","assets/icons/rotate.png","assets/icons/loader2.svg","helpers/errorsMap.js","helpers/Errors.js","helpers/writeLog.js","components/WebCamera.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","errors","window","require","invalidQR","invalidResponse","defaultError","This token already used","Your token time is expire","getError","error","hasOwnProperty","message","concat","whoIsGuilty","Errors","_this","arguments","length","undefined","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","Error","fs","writeLog","appendFileSync","JSON","stringify","stack","WebCamera","props","setRef","startVideo","canvasElement","document","createElement","canvas","getContext","video","readyState","HAVE_ENOUGH_DATA","hidden","height","videoHeight","width","videoWidth","drawImage","result","toDataURL","imageType","imageQuality","remove","getElementById","constraints","facingMode","navigator","mediaDevices","getUserMedia","stream","srcObject","play","_this$props2","style","console","log","react_default","a","Fragment","id","Component","version","remote","app","getVersion","clipboard","shell","App","state","step","urlId","scanning","downloadURL","orientationAngle","canvasWidth","canvasHeight","sendFile","_callee","endPoint","rawImage","formDataLocal","responseRaw","filename","formData","raw","response","regenerator_default","wrap","_context","prev","next","display","setState","uploading","dataURLtoBlob","imageSrc","FormData","append","fetch","method","body","sent","text","set","url","token","json","t0","t1","errorHandler","stop","webcam","capture","_callee2","_screenshot","_context2","takeFoto","rotateBase64Image","screen","orientation","type","angle","base64Image","offScreenCanvas","offScreenCanvasCtx","Promise","resolve","img","Image","src","onload","rotate","Math","PI","translate","_this2","setAngle","addEventListener","_this3","then","requestAnimationFrame","tick","bind","catch","err","name","setTimeout","screenOrientation","begin","end","color","beginPath","moveTo","x","y","lineTo","lineWidth","strokeStyle","stroke","code","imageData","getImageData","jsQR","data","inversionAttempts","drawLine","location","topLeftCorner","topRightCorner","bottomRightCorner","bottomLeftCorner","parsedData","parse","e","pause","objectSpread","trace","errorSide","keys","includes","errorsMap","push","_this4","className","transform","alt","components_WebCamera","onClick","value","onChange","writeText","event","preventDefault","openExternal","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.c2582db1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/android-chrome-192x192.33253a06.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/loader2.e211dc57.svg\";","const fs = window.require('fs');\r\n\r\nconst errors = {\r\n    invalidQR: \"Ung端ltiger QR-Code\",\r\n    invalidResponse: \"Ubg端ltige Antwort vom Kassenserver\",\r\n    defaultError: 'Unbekannter Fehler',\r\n    'This token already used': 'Dieses Token wurde bereits verwendet',\r\n    'Your token time is expire': 'Ihre Tokenzeit ist abgelaufen'\r\n};\r\n\r\nfunction getError(error) {\r\n    if (errors.hasOwnProperty(error.message)) {\r\n        return errors[error.message];\r\n    }\r\n    if (errors.hasOwnProperty(error)) {\r\n        return errors[error];\r\n    }\r\n    return `${error.whoIsGuilty} ${errors.defaultError}`;\r\n}\r\n\r\nexport default getError;\r\n","class Errors extends Error {\r\n    constructor(message = null, whoIsGuilty = 'Anwendung') {\r\n        super();\r\n        this.whoIsGuilty = whoIsGuilty;\r\n        this.message = message ? message:this.message;\r\n    }\r\n}\r\n\r\nexport default Errors;\r\n","const fs = window.require('fs');\r\n\r\nfunction writeLog(error) {\r\n    fs.appendFileSync(`errors.log`, JSON.stringify({message: error.message, stack: error.stack})+'\\n\\n');\r\n}\r\n\r\nexport default writeLog;\r\n","import React, {Component} from 'react';\r\n\r\nclass WebCamera extends Component {\r\n\r\n    componentDidMount() {\r\n        this.props.setRef(this);\r\n        this.startVideo();\r\n    }\r\n\r\n    takeFoto() {\r\n        let canvasElement = document.createElement(\"canvas\");\r\n\r\n        let canvas = canvasElement.getContext(\"2d\");\r\n        if (this.video && this.video.readyState === this.video.HAVE_ENOUGH_DATA) {\r\n            canvasElement.hidden = false;\r\n            canvasElement.height = this.video.videoHeight;\r\n            canvasElement.width = this.video.videoWidth;\r\n\r\n            canvas.drawImage(this.video, 0, 0, canvasElement.width, canvasElement.height);\r\n            // let imageData = canvas.getImageData(0, 0, canvasElement.width, canvasElement.height);\r\n            const result = canvasElement.toDataURL(\r\n                this.props.imageType || 'image/jpeg',\r\n                this.props.imageQuality || 1\r\n            );\r\n\r\n            canvasElement.remove();\r\n            return result;\r\n        }\r\n    }\r\n\r\n    async startVideo() {\r\n        this.video = document.getElementById(\"video\");\r\n        const {width, height} = this.props;\r\n        let constraints = this.props.constraints ? this.props.constraints : {\r\n            video: {\r\n                facingMode: \"environment\",\r\n                width,\r\n                height\r\n            }\r\n        }\r\n\r\n        try {\r\n            let stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n\r\n            this.video.srcObject = stream;\r\n            this.stream = stream;\r\n            this.video.play();\r\n\r\n        } catch (error) {\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const {style, width, height} = this.props;\r\n        console.log(style)\r\n        return (\r\n            <>\r\n                <video id=\"video\" style={style}/>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default WebCamera;\r\n","import React, {Component} from \"react\";\r\n// import QrScanner from \"./components/qr-scanner\";\r\n// import DisplayErrors from \"./components/displayErrors\";\r\nimport errorsMap from \"./helpers/errorsMap\";\r\nimport Errors from \"./helpers/Errors\";\r\nimport jsQR from \"jsqr\";\r\n// import Webcam from \"react-webcam\";\r\nimport dataURLtoBlob from \"blueimp-canvas-to-blob\";\r\n// import isJSON from \"./helpers/isJSON\";\r\nimport writeLog from \"./helpers/writeLog\";\r\nimport WebCamera from \"./components/WebCamera\";\r\n\r\nconst version = window.require(\"electron\").remote.app.getVersion();\r\n\r\nconst {clipboard, shell} = window.require(\"electron\");\r\n\r\nclass App extends Component {\r\n    state = {\r\n        step: 2,\r\n        urlId: null,\r\n        scanning: true,\r\n        downloadURL: null,\r\n        errors: [],\r\n        orientationAngle: 0,\r\n        canvasWidth: 442,\r\n        canvasHeight: 642,\r\n    };\r\n\r\n    setAngle() {\r\n        // default landscape-secondary\r\n        let angle = 0;\r\n        let width = 442;\r\n        let height = 642;\r\n\r\n        switch (window.screen.orientation.angle) {\r\n            case 90: // portrait-primary\r\n                angle = -90;\r\n                width = 642;\r\n                height = 442;\r\n                break;\r\n            case 270: // portrait-secondary\r\n                angle = 90;\r\n                width = 642;\r\n                height = 442;\r\n                break;\r\n            case 180: // landscape-primary\r\n                angle = -180;\r\n                width = 442;\r\n                height = 642;\r\n                break;\r\n        }\r\n\r\n        this.setState({orientationAngle: angle, canvasWidth: width, canvasHeight: height})\r\n    }\r\n\r\n    rotateBase64Image(base64Image) {\r\n        // create an off-screen canvas\r\n        const offScreenCanvas = document.createElement('canvas');\r\n        const offScreenCanvasCtx = offScreenCanvas.getContext('2d');\r\n        /*  offScreenCanvas.width = 1024;\r\n          offScreenCanvas.height = 1024;*/\r\n        return new Promise((resolve) => {\r\n            // create Image\r\n            let img = new Image();\r\n            img.src = base64Image;\r\n\r\n            img.onload = () => {\r\n                // set its dimension to rotated size\r\n\r\n                console.log(`${img.width}x${img.height}`)\r\n                offScreenCanvas.height = img.width;\r\n                offScreenCanvas.width = img.height;\r\n\r\n                /*switch (window.screen.orientation.type) {\r\n                    case 'landscape-primary':\r\n                        /!*      offScreenCanvasCtx.rotate(-90 * Math.PI / 180);\r\n                              offScreenCanvasCtx.translate(-offScreenCanvas.height, 0);*!/\r\n                        /!*\r\n                        offScreenCanvasCtx.rotate(-90 * Math.PI / 180);\r\n                        offScreenCanvasCtx.translate(-offScreenCanvas.height, 0);*!/\r\n                        break;\r\n                    case 'portrait-primary':\r\n                        offScreenCanvasCtx.rotate(90 * Math.PI / 180);\r\n                        offScreenCanvasCtx.translate(-offScreenCanvas.height, 0);\r\n                        break;\r\n                    case 'portrait-secondary':\r\n                        offScreenCanvasCtx.rotate(90 * Math.PI / 180);\r\n                        offScreenCanvasCtx.translate(0, -offScreenCanvas.width);\r\n                        break;\r\n\r\n                    default: // landscape-secondary\r\n                        offScreenCanvasCtx.rotate(90 * Math.PI / 180);\r\n                        offScreenCanvasCtx.translate(0, -offScreenCanvas.width);\r\n                        break;\r\n                }*/\r\n                offScreenCanvasCtx.rotate(90 * Math.PI / 180);\r\n                offScreenCanvasCtx.translate(0, -offScreenCanvas.width);\r\n                console.log(window.screen.orientation.type)\r\n                offScreenCanvasCtx.drawImage(img, 0, 0);\r\n\r\n                // encode image to data-uri with base64\r\n                resolve(offScreenCanvas.toDataURL(\"image/jpeg\", 100));\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    screenOrientation() {\r\n\r\n        this.setAngle();\r\n\r\n        window.screen.orientation.addEventListener('change', () => {\r\n            this.setAngle();\r\n            console.log('new orientation is ', window.screen.orientation, this.state.orientationAngle);\r\n        });\r\n    }\r\n\r\n    startVideo() {\r\n        let video = document.getElementById(\"video\");\r\n\r\n        navigator.mediaDevices\r\n            .getUserMedia({video: {facingMode: \"environment\"}})\r\n            .then(stream => {\r\n                video.srcObject = stream;\r\n                video.play();\r\n                requestAnimationFrame(this.tick.bind(this));\r\n            })\r\n            .catch(error => {\r\n                let err = error;\r\n                if (error.name == \"TrackStartError\" && error.message == \"\") {\r\n                    err = new Errors(\r\n                        \"Camera is not available, please disable other processes that use the camera.\"\r\n                    );\r\n                }\r\n                setTimeout(() => {\r\n                    this.startVideo();\r\n                }, 3000);\r\n                this.errorHandler(err);\r\n            });\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.startVideo();\r\n        this.screenOrientation();\r\n    }\r\n\r\n    sendFile = async () => {\r\n        let endPoint = `http://reorder2-dev.telenorma.info:7777/image`;\r\n        document.getElementById(\"loader\").style.display = \"block\";\r\n        try {\r\n            this.setState({uploading: true});\r\n\r\n            let rawImage = dataURLtoBlob(this.state.imageSrc);\r\n            const formDataLocal = new FormData();\r\n            formDataLocal.append(\"image\", rawImage, `tmp.jpeg`);\r\n            let responseRaw = await window.fetch(endPoint, {\r\n                method: \"POST\",\r\n                body: formDataLocal\r\n            });\r\n            let filename = await responseRaw.text();\r\n\r\n            const downloadURL = `${endPoint}/${filename}`;\r\n            const formData = new FormData();\r\n            formData.set(\"data\", JSON.stringify({url: downloadURL}));\r\n            formData.set(\"token\", this.state.token);\r\n            let raw = await window.fetch(`${this.state.url}api/add_image/`, {\r\n                method: \"POST\",\r\n                body: formData\r\n            });\r\n\r\n            // let text = await raw.text();\r\n            // console.log(text);\r\n            // if(text.indexOf('{\"result\":\"success\"}') && !isJSON(text)) {\r\n            //     this.setState({downloadURL, step: 4, uploading: false});\r\n            //     return;\r\n            // }\r\n\r\n            let response = {};\r\n            try {\r\n                response = await raw.json();\r\n                console.log(response);\r\n            } catch (e) {\r\n                throw new Errors(\"invalidResponse\", \"Server\");\r\n            }\r\n\r\n            if (response.hasOwnProperty(\"error\")) {\r\n                throw new Errors(response.error, \"Server\");\r\n            }\r\n\r\n            this.setState({downloadURL, step: 4, uploading: false});\r\n            // document.getElementById(\"loader\").style.display = \"none\";\r\n        } catch (error) {\r\n            if (!error.hasOwnProperty(\"whoIsGuilty\")) {\r\n                error = new Errors(error.message, \"Server\");\r\n            }\r\n\r\n            this.setState({step: 1, uploading: false});\r\n            this.startVideo();\r\n            this.errorHandler(error);\r\n        }\r\n    };\r\n\r\n    drawLine(begin, end, color) {\r\n        let canvasElement = document.getElementById(\"canvas\");\r\n        let canvas = canvasElement.getContext(\"2d\");\r\n        canvas.beginPath();\r\n        canvas.moveTo(begin.x, begin.y);\r\n        canvas.lineTo(end.x, end.y);\r\n        canvas.lineWidth = 4;\r\n        canvas.strokeStyle = color;\r\n        canvas.stroke();\r\n    }\r\n\r\n    tick() {\r\n        try {\r\n            //console.log(`tick`);\r\n            let video = document.getElementById(\"video\");\r\n            let canvasElement = document.getElementById(\"canvas\");\r\n            let canvas = canvasElement.getContext(\"2d\");\r\n            let code = null;\r\n            if (video && video.readyState === video.HAVE_ENOUGH_DATA) {\r\n                canvasElement.hidden = false;\r\n                canvasElement.height = video.videoHeight;\r\n                canvasElement.width = video.videoWidth;\r\n\r\n                // canvas.translate(canvasElement.width, 0);\r\n                // canvas.scale(-1, 1);\r\n                // canvas.rotate(0);\r\n\r\n                canvas.drawImage(\r\n                    video,\r\n                    0,\r\n                    0,\r\n                    canvasElement.width,\r\n                    canvasElement.height\r\n                );\r\n                let imageData = canvas.getImageData(\r\n                    0,\r\n                    0,\r\n                    canvasElement.width,\r\n                    canvasElement.height\r\n                );\r\n                code = jsQR(imageData.data, imageData.width, imageData.height, {\r\n                    inversionAttempts: \"dontInvert\"\r\n                });\r\n\r\n                if (code) {\r\n                    this.drawLine(\r\n                        code.location.topLeftCorner,\r\n                        code.location.topRightCorner,\r\n                        \"#e81d1d\"\r\n                    );\r\n                    this.drawLine(\r\n                        code.location.topRightCorner,\r\n                        code.location.bottomRightCorner,\r\n                        \"#e81d1d\"\r\n                    );\r\n                    this.drawLine(\r\n                        code.location.bottomRightCorner,\r\n                        code.location.bottomLeftCorner,\r\n                        \"#e81d1d\"\r\n                    );\r\n                    this.drawLine(\r\n                        code.location.bottomLeftCorner,\r\n                        code.location.topLeftCorner,\r\n                        \"#e81d1d\"\r\n                    );\r\n\r\n                    let parsedData = null;\r\n                    try {\r\n                        parsedData = JSON.parse(code.data);\r\n                    } catch (e) {\r\n                        throw new Errors(\"invalidQR\");\r\n                    }\r\n\r\n                    //console.log(parsedData);\r\n                    if (!parsedData.url) {\r\n                        throw new Errors(\"invalidQR\");\r\n                    }\r\n                    video.pause();\r\n                    this.setState({\r\n                        ...parsedData,\r\n                        scanning: false,\r\n                        step: 2\r\n                    });\r\n                }\r\n            }\r\n            if (!code) {\r\n                requestAnimationFrame(this.tick.bind(this));\r\n            }\r\n        } catch (error) {\r\n            requestAnimationFrame(this.tick.bind(this));\r\n            this.errorHandler(error);\r\n        }\r\n    }\r\n\r\n    setRef = webcam => {\r\n        this.webcam = webcam;\r\n    };\r\n\r\n    capture = async () => {\r\n        const _screenshot = this.webcam.takeFoto();\r\n        const imageSrc = await this.rotateBase64Image(_screenshot);\r\n        console.log(window.screen.orientation.type)\r\n        this.setState({\r\n            imageSrc,\r\n            step: 3\r\n        });\r\n    };\r\n\r\n    renderStep(step) {\r\n    }\r\n\r\n    clearErrors() {\r\n        this.setState({errors: []});\r\n    }\r\n\r\n    errorHandler(error) {\r\n        console.trace(`error:`, error, error.errorSide);\r\n        console.trace(`error keys:`, Object.keys(error));\r\n        let errors = this.state.errors;\r\n        if (!errors.includes(errorsMap(error))) {\r\n            errors.push(errorsMap(error));\r\n            writeLog(error);\r\n            this.setState({errors});\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const showScanner = this.state.scanning;\r\n        const {step} = this.state;\r\n        const showWebCam = !this.state.scanning && !this.state.imageSrc;\r\n        const showPreview = this.state.imageSrc && !this.state.downloadURL;\r\n        const videoConstraints = {\r\n            width: 1280,\r\n            height: 720,\r\n            // facingMode: \"user\"\r\n        };\r\n\r\n        return (\r\n            <div className={`App ${step == 2 ? \"\" : \"\"}`}>\r\n                <div className=\"App-header\">\r\n                    <div className=\"logo\">\r\n                        <img src={require(\"./assets/icons/android-chrome-192x192.png\")}/>\r\n                    </div>\r\n                    <h2>Beleg-Scanner</h2>\r\n                </div>\r\n\r\n                {step == 1 && (\r\n                    <>\r\n                        <h4>Scannen von QR-Code</h4>\r\n                        <canvas id=\"canvas\" hidden style={{transform: `rotate(${this.state.orientationAngle}deg)`}}/>\r\n                        <video id=\"video\" hidden/>\r\n\r\n                    </>\r\n                )}\r\n                <>\r\n                    {step == 2 && window.screen.orientation.type != 'portrait-primary' && (\r\n                        <div>\r\n                            <img width={250} src={require(\"./assets/icons/rotate.png\")} alt=\"\"/>\r\n                            <div>Bitte drehen Sie das Tablet um</div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {step == 2 && window.screen.orientation.type === 'portrait-primary' && (\r\n                        <>\r\n                            <div>\r\n                                <h4>Bitte nehmen Sie ein Foto Ihres Belegs auf</h4>\r\n                                {this.state.urlId && (\r\n                                    <div id=\"output\">\r\n                                        <h4>URL:ID{this.state.urlId}</h4>\r\n                                    </div>\r\n                                )}\r\n                                {/*<Webcam\r\n                                    style={{transform: `rotate(${this.state.orientationAngle}deg)`}}\r\n                                    videoConstraints={videoConstraints}\r\n                                    width={this.state.canvasWidth}\r\n                                    height={this.state.canvasHeight}\r\n                                    className=\"\"\r\n                                    screenshotFormat=\"image/jpeg\"\r\n                                    ref={this.setRef}\r\n                                    screenshotQuality={1}\r\n                                />*/}\r\n                                <WebCamera\r\n                                    setRef={this.setRef}\r\n                                    style={{transform: `rotate(${this.state.orientationAngle}deg)`}}\r\n                                    width={this.state.canvasWidth}\r\n                                    height={this.state.canvasHeight}\r\n                                />\r\n                                <div className=\"mt-3\">\r\n                                    <button\r\n                                        className=\"btn btn-primary custom-btn\"\r\n                                        onClick={this.capture}\r\n                                    >\r\n                                        Photo aufnehmen\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                    {step == 3 && (\r\n                        <>\r\n                            <h4>Aufgenommener Beleg</h4>\r\n                            <img\r\n                                id=\"photo-taken\"\r\n                                src={`data:image/jpeg;base64${this.state.imageSrc}`}\r\n                            />\r\n                            <img id=\"loader\" src={require(\"./assets/icons/loader2.svg\")}/>\r\n                            {!this.state.uploading && (\r\n                                <div className=\"mt-3\">\r\n                                    <div\r\n                                        className=\"btn btn-primary mr-2 custom-btn\"\r\n                                        onClick={this.sendFile}\r\n                                    >\r\n                                        Foto hochladen\r\n                                    </div>\r\n                                    <div\r\n                                        className=\"btn btn-secondary mr-2 custom-btn\"\r\n                                        onClick={() => this.setState({imageSrc: null, step: 2})}\r\n                                    >\r\n                                        Anderes Foto aufnehmen\r\n                                    </div>\r\n                                    <div\r\n                                        className=\"btn btn-secondary custom-btn\"\r\n                                        onClick={() => {\r\n                                            this.setState({scanning: true, step: 1}, () => {\r\n                                                this.startVideo();\r\n                                            });\r\n                                        }}\r\n                                    >\r\n                                        Neue QR-Code einscannen\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                    {step == 4 && (\r\n                        <div className=\"container py-3\">\r\n                            <p className=\"step4-thankyou\">\r\n                                Vielen Dank! Die Datei wurde hochgeladen. Bitte 端berpr端fen Sie\r\n                                den Link unten.\r\n                            </p>\r\n                            <div className=\"step4-block col-md-6\">\r\n                                <p>Link</p>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={this.state.downloadURL}\r\n                                    onChange={() => {\r\n                                    }}\r\n                                />\r\n                                <div className=\"input-group-append\">\r\n                                    <button\r\n                                        className=\"btn btn-primary custom-btn\"\r\n                                        type=\"button\"\r\n                                        onClick={() => clipboard.writeText(this.state.downloadURL)}\r\n                                    >\r\n                                        Kopieren\r\n                                    </button>\r\n                                    <button\r\n                                        className=\"btn btn-primary custom-btn\"\r\n                                        type=\"button\"\r\n                                        onClick={event => {\r\n                                            event.preventDefault();\r\n                                            shell.openExternal(this.state.downloadURL);\r\n                                        }}\r\n                                    >\r\n                                        Herunterladen\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                className=\"btn btn-primary custom-btn\"\r\n                                onClick={() => {\r\n                                    this.setState({scanning: true, step: 1}, () => {\r\n                                        this.startVideo();\r\n                                    });\r\n                                }}\r\n                            >\r\n                                Andere QR-Code einscannen\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </>\r\n                {/* {this.state.errors.length != 0 && (\r\n          <DisplayErrors\r\n            errors={this.state.errors}\r\n            close={() => {\r\n              this.clearErrors();\r\n            }}\r\n          />\r\n        )} */}\r\n                <div className=\"version pr-3\">version: {version}</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './styles/index.scss';\r\n\r\nReactDOM.render(\r\n  <App/>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}